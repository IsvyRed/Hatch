[gd_scene load_steps=27 format=3 uid="uid://c1ieq5spgoubg"]

[ext_resource type="PackedScene" uid="uid://bwiw68oyuvcma" path="res://Gameplay Elements/player.tscn" id="1_1wh16"]
[ext_resource type="Script" uid="uid://cyd2ieb1gbk5i" path="res://Gameplay Elements/main_level.gd" id="1_3btcu"]
[ext_resource type="PackedScene" uid="uid://dxh7vnusjnor2" path="res://Gameplay Elements/valid_tile.tscn" id="2_yup6v"]
[ext_resource type="PackedScene" uid="uid://cwh7sdilh4bx" path="res://Gameplay Elements/death_tile.tscn" id="3_ehsp4"]
[ext_resource type="Texture2D" uid="uid://brt76um1xutnc" path="res://Sprites/ParallaxBG/Sky.png" id="4_m4cj8"]
[ext_resource type="Texture2D" uid="uid://cuwcf8rpsomy1" path="res://Sprites/ParallaxBG/Horizon.png" id="5_fys1s"]
[ext_resource type="Script" uid="uid://cxgtni2pul6pr" path="res://Gameplay Elements/parallax_bg.gd" id="5_yk8oj"]
[ext_resource type="Texture2D" uid="uid://dbf4do513b6ig" path="res://Sprites/HatchBackgroundGlass.png" id="6_wbf2n"]
[ext_resource type="Texture2D" uid="uid://f8pcipshyw34" path="res://Sprites/ParallaxBG/FarBuildings.png" id="6_yk8oj"]
[ext_resource type="PackedScene" uid="uid://chwfq4c53qhjf" path="res://Testing Tools/floor_counter.tscn" id="7_rsaji"]
[ext_resource type="PackedScene" uid="uid://buptinn0f7qfe" path="res://Testing Tools/label.tscn" id="8_wbf2n"]
[ext_resource type="Texture2D" uid="uid://jvig27jmwk2d" path="res://Sprites/ParallaxBG/CloseBuildings.png" id="8_yk8oj"]
[ext_resource type="PackedScene" uid="uid://ljb3nxfgta2a" path="res://Gameplay Elements/Destructibles/GlassD1.tscn" id="9_wbf2n"]
[ext_resource type="PackedScene" uid="uid://rvmcbjo11p1" path="res://Gameplay Elements/Destructibles/glass_R_1.tscn" id="10_2bw7g"]
[ext_resource type="PackedScene" uid="uid://cutwb0msu2a4v" path="res://Gameplay Elements/Destructibles/glass_l_1.tscn" id="11_5y034"]
[ext_resource type="PackedScene" uid="uid://cj2hbl8j8d60m" path="res://Gameplay Elements/Destructibles/glass_r_2.tscn" id="12_4gst2"]
[ext_resource type="PackedScene" uid="uid://c4ym3l8x4lo2g" path="res://Gameplay Elements/Destructibles/glass_l_2.tscn" id="13_kbnh8"]
[ext_resource type="Texture2D" uid="uid://b56kxugxetg6u" path="res://Sprites/Player/empty.png" id="14_1tp30"]
[ext_resource type="PackedScene" uid="uid://bs73jndna8a7" path="res://Gameplay Elements/Destructibles/glass_r_3.tscn" id="14_kbnh8"]
[ext_resource type="Texture2D" uid="uid://drprp7mpyft5d" path="res://Sprites/TowerDropAnim1.png" id="15_1tp30"]
[ext_resource type="PackedScene" uid="uid://lfw4j26ij2p0" path="res://Gameplay Elements/Destructibles/glass_l_3.tscn" id="15_klllu"]
[ext_resource type="Texture2D" uid="uid://6rpbk2da3uyn" path="res://Sprites/TowerDropAnim2.png" id="16_riffs"]
[ext_resource type="Texture2D" uid="uid://dt6ao6eyv2cej" path="res://Sprites/TowerA.png" id="17_yk8oj"]
[ext_resource type="Texture2D" uid="uid://cqdjjbsy4aaka" path="res://Sprites/icon.svg" id="20_riffs"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rsaji"]
size = Vector2(628, 164)

[sub_resource type="SpriteFrames" id="SpriteFrames_yk8oj"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("14_1tp30")
}, {
"duration": 1.0,
"texture": ExtResource("15_1tp30")
}, {
"duration": 1.0,
"texture": ExtResource("16_riffs")
}],
"loop": false,
"name": &"default",
"speed": 24.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("15_1tp30")
}, {
"duration": 1.0,
"texture": ExtResource("16_riffs")
}],
"loop": true,
"name": &"level_end",
"speed": 12.0
}]

[node name="MainLevel" type="Node2D"]
script = ExtResource("1_3btcu")

[node name="ValidTiles" type="Node" parent="."]

[node name="ValidTile1" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(200, 0)

[node name="ValidTile2" parent="ValidTiles" instance=ExtResource("2_yup6v")]

[node name="ValidTile3" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(200, -200)

[node name="ValidTile4" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(0, -200)

[node name="ValidTile5" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(-200, -200)

[node name="ValidTile6" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(-200, 0)

[node name="ValidTile7" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(-200, 200)

[node name="ValidTile8" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(0, 200)

[node name="ValidTile9" parent="ValidTiles" instance=ExtResource("2_yup6v")]
position = Vector2(200, 200)

[node name="DeathTiles" type="Node" parent="."]

[node name="DeathTile" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(-200, -400)

[node name="DeathTile2" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(0, -400)

[node name="DeathTile3" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(200, -400)

[node name="DeathTile4" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(400, -200)

[node name="DeathTile5" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(400, 0)

[node name="DeathTile6" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(400, 200)

[node name="DeathTile7" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(200, 400)

[node name="DeathTile8" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(0, 400)

[node name="DeathTile9" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(-200, 400)

[node name="DeathTile10" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(-400, 200)

[node name="DeathTile11" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(-400, 0)

[node name="DeathTile12" parent="DeathTiles" instance=ExtResource("3_ehsp4")]
position = Vector2(-400, -200)

[node name="Boudaries" type="Node" parent="."]

[node name="LowerBoundary" type="StaticBody2D" parent="Boudaries"]
position = Vector2(0, -800)
collision_layer = 32
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boudaries/LowerBoundary"]
z_index = 5
position = Vector2(0, 1143)
shape = SubResource("RectangleShape2D_rsaji")

[node name="UpperBoundary" type="StaticBody2D" parent="Boudaries"]
position = Vector2(0, -400)
collision_layer = 32
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boudaries/UpperBoundary"]
position = Vector2(-1, 58)
shape = SubResource("RectangleShape2D_rsaji")

[node name="LeftBoundary" type="StaticBody2D" parent="Boudaries"]
position = Vector2(0, -400)
collision_layer = 32
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Boudaries/LeftBoundary"]
position = Vector2(-141.37, 0)
polygon = PackedVector2Array(-132.63, 141, -171.63, 662, -222.63, 660, -230.63, 138)

[node name="RightBoundary" type="StaticBody2D" parent="Boudaries"]
position = Vector2(0, -400)
collision_layer = 32
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Boudaries/RightBoundary"]
position = Vector2(-141.37, 0)
polygon = PackedVector2Array(419.37, 144, 452.37, 666, 499.37, 662, 495.37, 145)

[node name="Glass" type="Node" parent="."]

[node name="GlassD1" parent="Glass" instance=ExtResource("9_wbf2n")]
position = Vector2(-205, 200)

[node name="GlassD2" parent="Glass" instance=ExtResource("9_wbf2n")]
position = Vector2(0, 200)

[node name="GlassD3" parent="Glass" instance=ExtResource("9_wbf2n")]
position = Vector2(205, 200)

[node name="GlassR1" parent="Glass" instance=ExtResource("10_2bw7g")]
position = Vector2(295, -185)

[node name="GlassL1" parent="Glass" instance=ExtResource("11_5y034")]
position = Vector2(-295, -185)

[node name="GlassR2" parent="Glass" instance=ExtResource("12_4gst2")]
position = Vector2(295, -5)

[node name="GlassL2" parent="Glass" instance=ExtResource("13_kbnh8")]
position = Vector2(-295, -5)

[node name="GlassR3" parent="Glass" instance=ExtResource("14_kbnh8")]
position = Vector2(295, 180)

[node name="GlassL3" parent="Glass" instance=ExtResource("15_klllu")]
position = Vector2(-295, 180)

[node name="Sky" type="Sprite2D" parent="."]
z_index = -8
z_as_relative = false
scale = Vector2(5, 5)
texture = ExtResource("4_m4cj8")

[node name="ParallaxBG" type="Node" parent="."]
script = ExtResource("5_yk8oj")

[node name="HorizonLayer" type="Parallax2D" parent="ParallaxBG"]
z_index = -7
z_as_relative = false
scroll_scale = Vector2(0.15, 0.15)
ignore_camera_scroll = true

[node name="Horizon" type="Sprite2D" parent="ParallaxBG/HorizonLayer"]
position = Vector2(0, 500)
scale = Vector2(5, 5)
texture = ExtResource("5_fys1s")

[node name="FarBuildingsLayer" type="Parallax2D" parent="ParallaxBG"]
z_index = -6
z_as_relative = false
scroll_scale = Vector2(0.5, 0.5)
ignore_camera_scroll = true

[node name="FarBuildings" type="Sprite2D" parent="ParallaxBG/FarBuildingsLayer"]
position = Vector2(0, 1000)
scale = Vector2(5, 5)
texture = ExtResource("6_yk8oj")

[node name="CloseBuildingsLayer" type="Parallax2D" parent="ParallaxBG"]
z_index = -5
z_as_relative = false
ignore_camera_scroll = true

[node name="CloseBuildings" type="Sprite2D" parent="ParallaxBG/CloseBuildingsLayer"]
position = Vector2(-3, 3700)
scale = Vector2(5, 5)
texture = ExtResource("8_yk8oj")

[node name="Player" parent="." instance=ExtResource("1_1wh16")]

[node name="Tower" type="Sprite2D" parent="."]
z_index = -1
z_as_relative = false
scale = Vector2(5, 5)
texture = ExtResource("17_yk8oj")

[node name="DropAnim" type="AnimatedSprite2D" parent="."]
visible = false
z_index = 10
z_as_relative = false
scale = Vector2(5, 5)
sprite_frames = SubResource("SpriteFrames_yk8oj")

[node name="HatchBackgroundGlass" type="Sprite2D" parent="."]
z_index = 3
z_as_relative = false
texture_filter = 1
position = Vector2(0, -2.9999998)
scale = Vector2(5, 5)
texture = ExtResource("6_wbf2n")
metadata/_aseprite_wizard_interface_config_ = {
"layer_section": true,
"pending_changes": {}
}
metadata/_aseprite_wizard_config_ = {
"convert_fps_field": 60.0,
"convert_ms_field": 16.0,
"convert_to_fps": false,
"embed_tex": true,
"i_mode": 1,
"keep_anim_length": false,
"layers": ["Glass"],
"o_ex_p": "",
"o_folder": "",
"o_name": "",
"only_visible": false,
"player": "",
"scale": "1.0",
"slice": "",
"source": "res://Sprites/HatchBackground.aseprite",
"source_uid": 6640986122218009900
}
metadata/_aseprite_wizard_source_file_hash_ = "052e68285d4029970d05f7597348efd0"

[node name="FloorCounter" parent="." instance=ExtResource("7_rsaji")]
visible = false
offset_left = -493.5
offset_top = -283.5
offset_right = -492.5
offset_bottom = -260.5

[node name="Label" parent="." instance=ExtResource("8_wbf2n")]
offset_left = -539.0
offset_top = -211.0
offset_right = -426.0
offset_bottom = -188.0
text = "PLACEHOLDER"

[node name="Icon" type="Sprite2D" parent="."]
position = Vector2(706, 393)
scale = Vector2(0.19531223, 0.2109375)
texture = ExtResource("20_riffs")

[node name="EndLevelTimer" type="Timer" parent="."]
wait_time = 3.0

[connection signal="animation_finished" from="DropAnim" to="." method="_on_drop_anim_animation_finished"]
[connection signal="timeout" from="EndLevelTimer" to="." method="_on_end_level_timer_timeout"]
